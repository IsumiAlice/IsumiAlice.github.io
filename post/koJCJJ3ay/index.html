<html>
  <head>
    <meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Arm Performance Libraries 環境配置 | 死体的部落格</title>
<link rel="shortcut icon" href="https://IsumiAlice.github.io/favicon.ico?v=1592307199944">
<link href="https://cdn.jsdelivr.net/npm/remixicon@2.3.0/fonts/remixicon.css" rel="stylesheet">
<link rel="stylesheet" href="https://IsumiAlice.github.io/styles/main.css">
<link rel="alternate" type="application/atom+xml" title="Arm Performance Libraries 環境配置 | 死体的部落格 - Atom Feed" href="https://IsumiAlice.github.io/atom.xml">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Droid+Serif:400,700">



    <meta name="description" content="Arm Performance Libraries 作為 Linux 的 Arm Compiler 的一部分安裝，並且需要 Arm Allinea Studio 許可證
License
Arm Allinea Studio 工具套件為在 A..." />
    <meta name="keywords" content="高效能運算,數學" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
    <script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>
  </head>
  <body>
    <div class="main">
      <div class="main-content">
        <div class="site-header">
  <a href="https://IsumiAlice.github.io">
  <img class="avatar" src="https://IsumiAlice.github.io/images/avatar.png?v=1592307199944" alt="">
  </a>
  <h1 class="site-title">
    死体的部落格
  </h1>
  <p class="site-description">
    
    <form id="gridea-search-form" data-update="1592307199944" action="/search/">
      <input name="q" />
    </form>
  </p>
  <div class="menu-container">
    
      
        <a href="/" class="menu">
          首頁
        </a>
      
    
      
        <a href="/archives" class="menu">
          歸檔
        </a>
      
    
      
        <a href="/tags" class="menu">
          標籤
        </a>
      
    
      
        <a href="/post/about" class="menu">
          關於
        </a>
      
    
  </div>
  
  <div class="social-container">
    
      
    
      
    
      
    
      
    
      
    
  </div>
</div>

        <div class="post-detail">
          <article class="post">
            <h2 class="post-title">
              Arm Performance Libraries 環境配置
            </h2>
            <div class="post-info">
              <span>
                2020-04-19
              </span>
              <span>
                5 min read
              </span>
              
                <a href="https://IsumiAlice.github.io/tag/1S6grZsEF/" class="post-tag">
                  # 高效能運算
                </a>
              
                <a href="https://IsumiAlice.github.io/tag/jBseUEYdhs/" class="post-tag">
                  # 數學
                </a>
              
            </div>
            
              <img class="post-feature-image" src="https://raw.githubusercontent.com/IsumiAlice/IsumiPic/master/20200417004332.jpg" alt="">
            
            <div class="post-content-wrapper">
              <div class="post-content">
                <p>Arm Performance Libraries 作為 Linux 的 Arm Compiler 的一部分安裝，並且需要 Arm Allinea Studio 許可證</p>
<h2 id="license">License</h2>
<p>Arm Allinea Studio 工具套件為在 Arm 硬體上開發 HPC 應用程式提供了完整的解決方案。 它包括：</p>
<ul>
<li>Arm C/C ++/Fortran 編譯器</li>
<li>ArmPL</li>
<li>Arm Forge（Arm DDT，Arm MAP和Arm Performance Reports）</li>
</ul>
<p>需要許可證來使用這些工具。 有兩種許可證， Named User 和 Floating</p>
<p>在獲得許可證後，按照以下說明將其新增到系統中：</p>
<h3 id="add-a-named-user-license">Add a named user license</h3>
<ol>
<li>在 <code>/opt/arm/</code> 目錄中建立一個名為 licenses 的目錄</li>
<li>將許可證檔案複製到 <code>/opt/arm/licenses</code> 目錄；如果選擇將許可證檔案放在其他位置，則必須將 <code>ARM_LICENSE_DIR</code> 環境變數設定為指向它 <code>export ARM_LICENSE_DIR=/opt/arm/licenses</code></li>
<li>Arm Forge 和 Arm Performance Reports 在其特定的安裝目錄中搜索許可證。如果使用的是 Arm Allinea Studio 許可證，並且沒有為這些工具使用單獨的許可證，請設定 <code>ALLINEA_LICENSE_DIR</code> 環境變數以將這些工具指向您的 Arm Allinea Studio 許可證 <code>export ALLINEA_LICENSE_DIR=/opt/arm/licenses &gt;</code></li>
</ol>
<p>named user license，無需安裝Arm License Server</p>
<h3 id="setting-up-a-floating-license">Setting up a floating license</h3>
<p>必須下載並安裝 <a href="https://developer.arm.com/tools-and-software/server-and-hpc/downloads/arm-licence-server">Arm License Server</a></p>
<p>浮動許可證由伺服器許可證檔案和客戶端許可證檔案組成，在<a href="https://www.arm.com/products/development-tools/server-and-hpc/allinea-studio/get-software?_ga=2.43607085.960219704.1587365001-756695113.1577670013">這裡</a>申請</p>
<p>檢查客戶端許可證是否包含執行Arm License Server的計算機的主機名或IP地址</p>
<ol>
<li>將客戶端許可證新增到安裝 Arm Allinea Studio 的計算機上。在 <code>/opt/arm</code> 目錄中建立一個名為 <code>licenses</code> 的目錄</li>
<li>同 named</li>
<li>同 named</li>
<li>將伺服器許可證檔案新增到安裝 Arm License Server 的計算機上。在 <code>/opt/arm/licenceserver</code> 目錄中建立一個名為 <code>licenses</code> 的目錄，並將您的許可證檔案複製到該目錄中</li>
<li>重新啟動 Arm License Server</li>
</ol>
<h2 id="下載">下載</h2>
<p><a href="https://developer.arm.com/products/software-development-tools/hpc/arm-allinea-studio/download">Arm Allinea Studio downloads page</a></p>
<h2 id="安裝">安裝</h2>
<p>需要 python &gt;= 2.7</p>
<p>需要 C Libraries：SUSE and RHEL: <code>glibc-devel</code> Ubuntu: <code>libc6-dev</code></p>
<ol>
<li>解壓縮 <code>tar -xvf .tar.gz</code></li>
<li><code>cd</code></li>
<li>預設配置安裝 <code>sudo ./.sh</code><br>
可以自定義 options</li>
<li>安裝程式將顯示EULA並提示您同意條款 接下來主要介紹 ArmPL 的配置和使用</li>
</ol>
<h2 id="配置">配置</h2>
<ol>
<li>檢視可用的環境模組 <code>module avail</code> 可能需要配置MODULEPATH環境變數以包含安裝目錄 <code>export MODULEPATH=$MODULEPATH:/opt/arm/modulefiles/</code></li>
<li>為您使用的編譯器載入適當的模組，如果使用的是用於Linux的Arm Compiler，則建議僅載入編譯器模組，如果使用gcc，則必須載入所需的特定Arm Performance Libraries模組<br>
<code>module load Generic-AArch64/RHEL/7/arm-linux-compiler/20.0</code><br>
如果使用gcc編譯器，請確保載入正確的模組<br>
<code>module load Generic-AArch64/RHEL/7/gcc-9.2.0/armpl/20.0.0</code><br>
Tips: 可以考慮將模組載入命令新增到您的.profile中，以在每次登入時自動執行它</li>
<li>根據使用的編譯器，使用以下命令檢查環境
<table>
<thead>
<tr>
<th><strong>Compiler</strong></th>
<th><strong>Command</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>armclang</td>
<td><code>which armclang</code></td>
</tr>
<tr>
<td>gcc</td>
<td><code>which gcc</code></td>
</tr>
</tbody>
</table>
</li>
</ol>
<h2 id="舉個例子">舉個例子</h2>
<p>ArmPL 包含許多示例程式，如果是預設安裝的，位置在<code>/opt/arm//examples/</code></p>
<p>這裡以 <code>fftw_dft_r2c_1d_c_example.c</code> 為例，具體做什麼就不看了</p>
<p>編譯和連結的選項：<br>
-armpl: 與arm編譯器進行編譯和連結時<br>
-mcpu = native: 允許編譯器從主機系統推斷要使用的庫<br>
-L\lib: 新增庫搜尋路徑<br>
-larmpl_lp64: 連結到Arm Performance Libraries<br>
-lgfortran: 連結到 gcc Fortran 執行庫<br>
-lm: 連結到標準數學庫</p>
<ol>
<li>編譯原始碼，生成一個目標檔案
<table>
<thead>
<tr>
<th><strong>Compiler</strong></th>
<th><strong>Command</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>armclang</td>
<td><code>armclang -c -armpl -mcpu=native fftw_dft_r2c_1d_c_example.c -o fftw_dft_r2c_1d_c_example.o</code></td>
</tr>
<tr>
<td>gcc</td>
<td><code>gcc -c -I/include fftw_dft_r2c_1d_c_example.c -o fftw_dft_r2c_1d_c_example.o</code></td>
</tr>
</tbody>
</table>
</li>
<li>將目的碼連結到可執行檔案中
<table>
<thead>
<tr>
<th><strong>Compiler</strong></th>
<th><strong>Command</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>armclang</td>
<td><code>armclang fftw_dft_r2c_1d_c_example.o -o fftw_dft_r2c_1d_c_example.exe -armpl -mcpu=native -lm</code></td>
</tr>
<tr>
<td>gcc</td>
<td><code>gcc fftw_dft_r2c_1d_c_example.o -L/lib -o fftw_dft_r2c_1d_c_example.exe -larmpl_lp64 -lgfortran -lm</code></td>
</tr>
</tbody>
</table>
</li>
<li>在Arm系統上執行可執行檔案 <code>./fftw_dft_r2c_1d_c_example.exe</code><br>
可以看到相應的輸出</li>
</ol>
<h2 id="compile-and-test-the-examples-examples">Compile and test the examples examples</h2>
<p>目錄包含以下內容：</p>
<ul>
<li>一個GNUmakefile，用於生成和執行所有示例程式</li>
<li>C 原始碼 .c</li>
<li>Fortran原始碼 .f90</li>
<li>每個示例的預期輸出 .expected</li>
</ul>
<p>Makefile編譯並執行每個示例，然後將生成的輸出與預期的輸出進行比較。任何差異都會標記為錯誤</p>

              </div>
              <div class="toc-container">
                <ul class="markdownIt-TOC">
<li>
<ul>
<li><a href="#license">License</a>
<ul>
<li><a href="#add-a-named-user-license">Add a named user license</a></li>
<li><a href="#setting-up-a-floating-license">Setting up a floating license</a></li>
</ul>
</li>
<li><a href="#%E4%B8%8B%E8%BC%89">下載</a></li>
<li><a href="#%E5%AE%89%E8%A3%9D">安裝</a></li>
<li><a href="#%E9%85%8D%E7%BD%AE">配置</a></li>
<li><a href="#%E8%88%89%E5%80%8B%E4%BE%8B%E5%AD%90">舉個例子</a></li>
<li><a href="#compile-and-test-the-examples-examples">Compile and test the examples examples</a></li>
</ul>
</li>
</ul>

              </div>
            </div>
          </article>
        </div>

        
          <div class="next-post">
            <div class="next">下一篇</div>
            <a href="https://IsumiAlice.github.io/post/8wQ7j8r3w/">
              <h3 class="post-title">
                康威生命遊戲
              </h3>
            </a>
          </div>
        

        

        <div class="site-footer">
  Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a>
  <a class="rss" href="https://IsumiAlice.github.io/atom.xml" target="_blank">
    <i class="ri-rss-line"></i> RSS
  </a>
</div>

      </div>
    </div>

    <script>
      hljs.initHighlightingOnLoad()

      let mainNavLinks = document.querySelectorAll(".markdownIt-TOC a");

      // This should probably be throttled.
      // Especially because it triggers during smooth scrolling.
      // https://lodash.com/docs/4.17.10#throttle
      // You could do like...
      // window.addEventListener("scroll", () => {
      //    _.throttle(doThatStuff, 100);
      // });
      // Only not doing it here to keep this Pen dependency-free.

      window.addEventListener("scroll", event => {
        let fromTop = window.scrollY;

        mainNavLinks.forEach((link, index) => {
          let section = document.getElementById(decodeURI(link.hash).substring(1));
          let nextSection = null
          if (mainNavLinks[index + 1]) {
            nextSection = document.getElementById(decodeURI(mainNavLinks[index + 1].hash).substring(1));
          }
          if (section.offsetTop <= fromTop) {
            if (nextSection) {
              if (nextSection.offsetTop > fromTop) {
                link.classList.add("current");
              } else {
                link.classList.remove("current");    
              }
            } else {
              link.classList.add("current");
            }
          } else {
            link.classList.remove("current");
          }
        });
      });

    </script>
  </body>
</html>
